byte MMUControl@0
byte IOControl@1
byte Vicky.Master.Control@$D000
byte Bitmap0Control@$D100
byte Bitmap0High@$D103
proc io.select()
IOControl=A
	8003 : 85 .
	8004 : 01 .
endproc
	8005 : 60 `
zword poke.address
byte fill.data
proc poke()
poke.address=R
	8006 : 85 .
	8007 : 20 .
	8008 : 86 .
	8009 : 21 !
A=Y
	800a : 98 .
Y=0
	800b : a0 .
	800c : 00 .
poke.address[Y]=A
	800d : 91 .
	800e : 20 .
endproc
	800f : 60 `
proc set.fill()
poke.address=R
	8010 : 85 .
	8011 : 20 .
	8012 : 86 .
	8013 : 21 !
fill.data=Y
	8014 : 8c .
	8015 : 00 .
	8016 : 06 .
endproc
	8017 : 60 `
proc map()
interrupt.off
	8018 : 78 x
CPU->S
	8019 : 48 H
	801a : da .
	801b : 5a Z
A=$80
	801c : a9 .
	801d : 80 .
MMUControl=A
	801e : 85 .
	801f : 00 .
S->CPU
	8020 : 7a z
	8021 : fa .
	8022 : 68 h
poke()
	8023 : 20 .
	8024 : 06 .
	8025 : 80 .
A=$00
	8026 : a9 .
	8027 : 00 .
MMUControl=A
	8028 : 85 .
	8029 : 00 .
interrupt.on
	802a : 58 X
endproc
	802b : 60 `
proc do.fill()
Y=0
	802c : a0 .
	802d : 00 .
r.for
	802e : c9 .
	802f : 00 .
	8030 : d0 .
	8031 : 01 .
	8032 : ca .
	8033 : 3a :
	8034 : da .
	8035 : 48 H
A=fill.data
	8036 : ad .
	8037 : 00 .
	8038 : 06 .
poke.address[Y]=A
	8039 : 91 .
	803a : 20 .
++poke.address
	803b : e6 .
	803c : 20 .
	803d : d0 .
	803e : 02 .
	803f : e6 .
	8040 : 21 !
next
	8041 : 68 h
	8042 : fa .
	8043 : d0 .
	8044 : 00 .
	8044 : e9 [PATCH]
	8045 : c9 .
	8046 : 00 .
	8047 : d0 .
	8048 : 00 .
	8048 : e5 [PATCH]
endproc
	8049 : 60 `
proc main()
io.select(0)
	804a : a9 .
	804b : 00 .
	804c : a2 .
	804d : 00 .
	804e : 20 .
	804f : 03 .
	8050 : 80 .
A=15
	8051 : a9 .
	8052 : 0f .
Vicky.Master.Control=A
	8053 : 8d .
	8054 : 00 .
	8055 : d0 .
A=1
	8056 : a9 .
	8057 : 01 .
Bitmap0Control=A
	8058 : 8d .
	8059 : 00 .
	805a : d1 .
A=1
	805b : a9 .
	805c : 01 .
Bitmap0High=A
	805d : 8d .
	805e : 03 .
	805f : d1 .
map(9,8)
	8060 : a9 .
	8061 : 09 .
	8062 : a2 .
	8063 : 00 .
	8064 : a0 .
	8065 : 08 .
	8066 : 20 .
	8067 : 18 .
	8068 : 80 .
set.fill($2000,3)
	8069 : a9 .
	806a : 00 .
	806b : a2 .
	806c : 20 .
	806d : a0 .
	806e : 03 .
	806f : 20 .
	8070 : 10 .
	8071 : 80 .
do.fill(8192)
	8072 : a9 .
	8073 : 00 .
	8074 : a2 .
	8075 : 20 .
	8076 : 20 .
	8077 : 2c ,
	8078 : 80 .
map(10,9)
	8079 : a9 .
	807a : 0a .
	807b : a2 .
	807c : 00 .
	807d : a0 .
	807e : 09 .
	807f : 20 .
	8080 : 18 .
	8081 : 80 .
set.fill($4000,$18)
	8082 : a9 .
	8083 : 00 .
	8084 : a2 .
	8085 : 40 @
	8086 : a0 .
	8087 : 18 .
	8088 : 20 .
	8089 : 10 .
	808a : 80 .
do.fill(8192)
	808b : a9 .
	808c : 00 .
	808d : a2 .
	808e : 20 .
	808f : 20 .
	8090 : 2c ,
	8091 : 80 .
map(11,10)
	8092 : a9 .
	8093 : 0b .
	8094 : a2 .
	8095 : 00 .
	8096 : a0 .
	8097 : 0a .
	8098 : 20 .
	8099 : 18 .
	809a : 80 .
set.fill($6000,$E0)
	809b : a9 .
	809c : 00 .
	809d : a2 .
	809e : 60 `
	809f : a0 .
	80a0 : e0 .
	80a1 : 20 .
	80a2 : 10 .
	80a3 : 80 .
do.fill(8192)
	80a4 : a9 .
	80a5 : 00 .
	80a6 : a2 .
	80a7 : 20 .
	80a8 : 20 .
	80a9 : 2c ,
	80aa : 80 .
map(11,11)
	80ab : a9 .
	80ac : 0b .
	80ad : a2 .
	80ae : 00 .
	80af : a0 .
	80b0 : 0b .
	80b1 : 20 .
	80b2 : 18 .
	80b3 : 80 .
set.fill($6000,$E3)
	80b4 : a9 .
	80b5 : 00 .
	80b6 : a2 .
	80b7 : 60 `
	80b8 : a0 .
	80b9 : e3 .
	80ba : 20 .
	80bb : 10 .
	80bc : 80 .
do.fill(8192)
	80bd : a9 .
	80be : 00 .
	80bf : a2 .
	80c0 : 20 .
	80c1 : 20 .
	80c2 : 2c ,
	80c3 : 80 .
map(11,12)
	80c4 : a9 .
	80c5 : 0b .
	80c6 : a2 .
	80c7 : 00 .
	80c8 : a0 .
	80c9 : 0c .
	80ca : 20 .
	80cb : 18 .
	80cc : 80 .
set.fill($6000,$E6)
	80cd : a9 .
	80ce : 00 .
	80cf : a2 .
	80d0 : 60 `
	80d1 : a0 .
	80d2 : e6 .
	80d3 : 20 .
	80d4 : 10 .
	80d5 : 80 .
do.fill(8192)
	80d6 : a9 .
	80d7 : 00 .
	80d8 : a2 .
	80d9 : 20 .
	80da : 20 .
	80db : 2c ,
	80dc : 80 .
map(11,13)
	80dd : a9 .
	80de : 0b .
	80df : a2 .
	80e0 : 00 .
	80e1 : a0 .
	80e2 : 0d .
	80e3 : 20 .
	80e4 : 18 .
	80e5 : 80 .
set.fill($6000,$E9)
	80e6 : a9 .
	80e7 : 00 .
	80e8 : a2 .
	80e9 : 60 `
	80ea : a0 .
	80eb : e9 .
	80ec : 20 .
	80ed : 10 .
	80ee : 80 .
do.fill(8192)
	80ef : a9 .
	80f0 : 00 .
	80f1 : a2 .
	80f2 : 20 .
	80f3 : 20 .
	80f4 : 2c ,
	80f5 : 80 .
map(11,14)
	80f6 : a9 .
	80f7 : 0b .
	80f8 : a2 .
	80f9 : 00 .
	80fa : a0 .
	80fb : 0e .
	80fc : 20 .
	80fd : 18 .
	80fe : 80 .
set.fill($6000,$EC)
	80ff : a9 .
	8100 : 00 .
	8101 : a2 .
	8102 : 60 `
	8103 : a0 .
	8104 : ec .
	8105 : 20 .
	8106 : 10 .
	8107 : 80 .
do.fill(8192)
	8108 : a9 .
	8109 : 00 .
	810a : a2 .
	810b : 20 .
	810c : 20 .
	810d : 2c ,
	810e : 80 .
map(11,15)
	810f : a9 .
	8110 : 0b .
	8111 : a2 .
	8112 : 00 .
	8113 : a0 .
	8114 : 0f .
	8115 : 20 .
	8116 : 18 .
	8117 : 80 .
set.fill($6000,$00)
	8118 : a9 .
	8119 : 00 .
	811a : a2 .
	811b : 60 `
	811c : a0 .
	811d : 00 .
	811e : 20 .
	811f : 10 .
	8120 : 80 .
do.fill(8192)
	8121 : a9 .
	8122 : 00 .
	8123 : a2 .
	8124 : 20 .
	8125 : 20 .
	8126 : 2c ,
	8127 : 80 .
map(11,16)
	8128 : a9 .
	8129 : 0b .
	812a : a2 .
	812b : 00 .
	812c : a0 .
	812d : 10 .
	812e : 20 .
	812f : 18 .
	8130 : 80 .
set.fill($6000,$1F)
	8131 : a9 .
	8132 : 00 .
	8133 : a2 .
	8134 : 60 `
	8135 : a0 .
	8136 : 1f .
	8137 : 20 .
	8138 : 10 .
	8139 : 80 .
do.fill(8192)
	813a : a9 .
	813b : 00 .
	813c : a2 .
	813d : 20 .
	813e : 20 .
	813f : 2c ,
	8140 : 80 .
halt
	8141 : 80 .
	8142 : fe .
endproc
	8143 : 60 `
