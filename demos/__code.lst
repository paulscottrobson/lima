byte MMUControl@0
byte IOControl@1
byte Vicky.Master.Control@$D000
byte Bitmap0Control@$D100
byte Bitmap0High@$D103
proc io.select()
IOControl=A
	8003 : 85 .
	8004 : 01 .
endproc
	8005 : 60 `
zword .poke.address
byte .fill.data
proc poke()
.poke.address=R
	8006 : 85 .
	8007 : 20 .
	8008 : 86 .
	8009 : 21 !
A=Y
	800a : 98 .
Y=0
	800b : a0 .
	800c : 00 .
.poke.address[Y]=A
	800d : 91 .
	800e : 20 .
endproc
	800f : 60 `
proc set.fill()
.poke.address=R
	8010 : 85 .
	8011 : 20 .
	8012 : 86 .
	8013 : 21 !
.fill.data=Y
	8014 : 8c .
	8015 : 00 .
	8016 : 06 .
endproc
	8017 : 60 `
proc map()
interrupt.off
	8018 : 78 x
CPU->S
	8019 : 48 H
	801a : da .
	801b : 5a Z
A=$80
	801c : a9 .
	801d : 80 .
MMUControl=A
	801e : 85 .
	801f : 00 .
S->CPU
	8020 : 7a z
	8021 : fa .
	8022 : 68 h
R+8
	8023 : 18 .
	8024 : 69 i
	8025 : 08 .
	8026 : 90 .
	8027 : 01 .
	8028 : e8 .
poke()
	8029 : 20 .
	802a : 06 .
	802b : 80 .
A=$00
	802c : a9 .
	802d : 00 .
MMUControl=A
	802e : 85 .
	802f : 00 .
interrupt.on
	8030 : 58 X
endproc
	8031 : 60 `
proc do.fill()
Y=0
	8032 : a0 .
	8033 : 00 .
r.for
	8034 : c9 .
	8035 : 00 .
	8036 : d0 .
	8037 : 01 .
	8038 : ca .
	8039 : 3a :
	803a : da .
	803b : 48 H
A=.fill.data
	803c : ad .
	803d : 00 .
	803e : 06 .
.poke.address[Y]=A
	803f : 91 .
	8040 : 20 .
++.poke.address
	8041 : e6 .
	8042 : 20 .
	8043 : d0 .
	8044 : 02 .
	8045 : e6 .
	8046 : 21 !
next
	8047 : 68 h
	8048 : fa .
	8049 : d0 .
	804a : 00 .
	804a : e9 [PATCH]
	804b : c9 .
	804c : 00 .
	804d : d0 .
	804e : 00 .
	804e : e5 [PATCH]
endproc
	804f : 60 `
proc clear.bitmap()
.fill.data=A
	8050 : 8d .
	8051 : 00 .
	8052 : 06 .
A=9
	8053 : a9 .
	8054 : 09 .
a.for
	8055 : 3a :
	8056 : 48 H
A+8
	8057 : 18 .
	8058 : 69 i
	8059 : 08 .
y=a
	805a : a8 .
map(1)
	805b : a9 .
	805c : 01 .
	805d : a2 .
	805e : 00 .
	805f : 20 .
	8060 : 18 .
	8061 : 80 .
R=$2000
	8062 : a9 .
	8063 : 00 .
	8064 : a2 .
	8065 : 20 .
.poke.address=R
	8066 : 85 .
	8067 : 20 .
	8068 : 86 .
	8069 : 21 !
32
	806a : a9 .
	806b : 20 .
	806c : a2 .
	806d : 00 .
a.for
	806e : 3a :
	806f : 48 H
A=.fill.data
	8070 : ad .
	8071 : 00 .
	8072 : 06 .
Y=0
	8073 : a0 .
	8074 : 00 .
repeat
.poke.address[Y]=A
	8075 : 91 .
	8076 : 20 .
++Y
	8077 : c8 .
Y=?
	8078 : c0 .
	8079 : 00 .
until
	807a : d0 .
	807b : 00 .
	807b : f9 [PATCH]
R=.poke.address
	807c : a5 .
	807d : 20 .
	807e : a6 .
	807f : 21 !
R+256
	8080 : 18 .
	8081 : 69 i
	8082 : 00 .
	8083 : 48 H
	8084 : 8a .
	8085 : 69 i
	8086 : 01 .
	8087 : aa .
	8088 : 68 h
.poke.address=R
	8089 : 85 .
	808a : 20 .
	808b : 86 .
	808c : 21 !
next
	808d : 68 h
	808e : d0 .
	808f : 00 .
	808f : de [PATCH]
next
	8090 : 68 h
	8091 : d0 .
	8092 : 00 .
	8092 : c2 [PATCH]
map(1,9)
	8093 : a9 .
	8094 : 01 .
	8095 : a2 .
	8096 : 00 .
	8097 : a0 .
	8098 : 09 .
	8099 : 20 .
	809a : 18 .
	809b : 80 .
endproc
	809c : 60 `
proc main()
io.select(0)
	809d : a9 .
	809e : 00 .
	809f : a2 .
	80a0 : 00 .
	80a1 : 20 .
	80a2 : 03 .
	80a3 : 80 .
A=15
	80a4 : a9 .
	80a5 : 0f .
Vicky.Master.Control=A
	80a6 : 8d .
	80a7 : 00 .
	80a8 : d0 .
A=1
	80a9 : a9 .
	80aa : 01 .
Bitmap0Control=A
	80ab : 8d .
	80ac : 00 .
	80ad : d1 .
A=1
	80ae : a9 .
	80af : 01 .
Bitmap0High=A
	80b0 : 8d .
	80b1 : 03 .
	80b2 : d1 .
clear.bitmap($E0)
	80b3 : a9 .
	80b4 : e0 .
	80b5 : a2 .
	80b6 : 00 .
	80b7 : 20 .
	80b8 : 50 P
	80b9 : 80 .
halt
	80ba : 80 .
	80bb : fe .
endproc
	80bc : 60 `
