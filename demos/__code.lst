byte MMUControl@0
byte IOControl@1
byte Vicky.Master.Control@$D000
byte Bitmap0Control@$D100
byte Bitmap0High@$D103
proc io.select()
IOControl=A
	8003 : 85 .
	8004 : 01 .
endproc
	8005 : 60 `
zword .poke.address
byte .fill.data
proc poke()
.poke.address=R
	8006 : 85 .
	8007 : 20 .
	8008 : 86 .
	8009 : 21 !
A=Y
	800a : 98 .
Y=0
	800b : a0 .
	800c : 00 .
.poke.address[Y]=A
	800d : 91 .
	800e : 20 .
endproc
	800f : 60 `
proc set.fill()
.poke.address=R
	8010 : 85 .
	8011 : 20 .
	8012 : 86 .
	8013 : 21 !
.fill.data=Y
	8014 : 8c .
	8015 : 00 .
	8016 : 06 .
endproc
	8017 : 60 `
proc do.fill()
Y=0
	8018 : a0 .
	8019 : 00 .
r.for
	801a : c9 .
	801b : 00 .
	801c : d0 .
	801d : 01 .
	801e : ca .
	801f : 3a :
	8020 : da .
	8021 : 48 H
A=.fill.data
	8022 : ad .
	8023 : 00 .
	8024 : 06 .
.poke.address[Y]=A
	8025 : 91 .
	8026 : 20 .
++.poke.address
	8027 : e6 .
	8028 : 20 .
	8029 : d0 .
	802a : 02 .
	802b : e6 .
	802c : 21 !
next
	802d : 68 h
	802e : fa .
	802f : d0 .
	8030 : 00 .
	8030 : e9 [PATCH]
	8031 : c9 .
	8032 : 00 .
	8033 : d0 .
	8034 : 00 .
	8034 : e5 [PATCH]
endproc
	8035 : 60 `
proc map()
interrupt.off
	8036 : 78 x
CPU->S
	8037 : 48 H
	8038 : da .
	8039 : 5a Z
A=$80
	803a : a9 .
	803b : 80 .
MMUControl=A
	803c : 85 .
	803d : 00 .
S->CPU
	803e : 7a z
	803f : fa .
	8040 : 68 h
R+8
	8041 : 18 .
	8042 : 69 i
	8043 : 08 .
	8044 : 90 .
	8045 : 01 .
	8046 : e8 .
poke()
	8047 : 20 .
	8048 : 06 .
	8049 : 80 .
A=$00
	804a : a9 .
	804b : 00 .
MMUControl=A
	804c : 85 .
	804d : 00 .
interrupt.on
	804e : 58 X
endproc
	804f : 60 `
proc map.into()
a+8
	8050 : 18 .
	8051 : 69 i
	8052 : 08 .
y=a
	8053 : a8 .
map(1)
	8054 : a9 .
	8055 : 01 .
	8056 : a2 .
	8057 : 00 .
	8058 : 20 .
	8059 : 36 6
	805a : 80 .
R=$2000
	805b : a9 .
	805c : 00 .
	805d : a2 .
	805e : 20 .
endproc
	805f : 60 `
proc map.default()
map(1,9)
	8060 : a9 .
	8061 : 01 .
	8062 : a2 .
	8063 : 00 .
	8064 : a0 .
	8065 : 09 .
	8066 : 20 .
	8067 : 36 6
	8068 : 80 .
endproc
	8069 : 60 `
proc clear.bitmap()
.fill.data=A
	806a : 8d .
	806b : 00 .
	806c : 06 .
A=9
	806d : a9 .
	806e : 09 .
a.for
	806f : 3a :
	8070 : 48 H
map.into()
	8071 : 20 .
	8072 : 50 P
	8073 : 80 .
.poke.address=R
	8074 : 85 .
	8075 : 20 .
	8076 : 86 .
	8077 : 21 !
32
	8078 : a9 .
	8079 : 20 .
	807a : a2 .
	807b : 00 .
a.for
	807c : 3a :
	807d : 48 H
A=.fill.data
	807e : ad .
	807f : 00 .
	8080 : 06 .
Y=0
	8081 : a0 .
	8082 : 00 .
repeat
.poke.address[Y]=A
	8083 : 91 .
	8084 : 20 .
++Y
	8085 : c8 .
Y=?
	8086 : c0 .
	8087 : 00 .
until
	8088 : d0 .
	8089 : 00 .
	8089 : f9 [PATCH]
R=.poke.address
	808a : a5 .
	808b : 20 .
	808c : a6 .
	808d : 21 !
R+256
	808e : 18 .
	808f : 69 i
	8090 : 00 .
	8091 : 48 H
	8092 : 8a .
	8093 : 69 i
	8094 : 01 .
	8095 : aa .
	8096 : 68 h
.poke.address=R
	8097 : 85 .
	8098 : 20 .
	8099 : 86 .
	809a : 21 !
next
	809b : 68 h
	809c : d0 .
	809d : 00 .
	809d : de [PATCH]
next
	809e : 68 h
	809f : d0 .
	80a0 : 00 .
	80a0 : ce [PATCH]
map.default()
	80a1 : 20 .
	80a2 : 60 `
	80a3 : 80 .
endproc
	80a4 : 60 `
proc clear.sprites()
io.select(0)
	80a5 : a9 .
	80a6 : 00 .
	80a7 : a2 .
	80a8 : 00 .
	80a9 : 20 .
	80aa : 03 .
	80ab : 80 .
set.fill($D900,$00)
	80ac : a9 .
	80ad : 00 .
	80ae : a2 .
	80af : d9 .
	80b0 : a0 .
	80b1 : 00 .
	80b2 : 20 .
	80b3 : 10 .
	80b4 : 80 .
do.fill($200)
	80b5 : a9 .
	80b6 : 00 .
	80b7 : a2 .
	80b8 : 02 .
	80b9 : 20 .
	80ba : 18 .
	80bb : 80 .
endproc
	80bc : 60 `
word .current.sprite
proc sprite.use()
<<R
	80bd : 0a .
	80be : 48 H
	80bf : 8a .
	80c0 : 2a *
	80c1 : aa .
	80c2 : 68 h
<<R
	80c3 : 0a .
	80c4 : 48 H
	80c5 : 8a .
	80c6 : 2a *
	80c7 : aa .
	80c8 : 68 h
<<R
	80c9 : 0a .
	80ca : 48 H
	80cb : 8a .
	80cc : 2a *
	80cd : aa .
	80ce : 68 h
R+$D900
	80cf : 18 .
	80d0 : 69 i
	80d1 : 00 .
	80d2 : 48 H
	80d3 : 8a .
	80d4 : 69 i
	80d5 : d9 .
	80d6 : aa .
	80d7 : 68 h
.current.sprite=R
	80d8 : 8d .
	80d9 : 01 .
	80da : 06 .
	80db : 8e .
	80dc : 02 .
	80dd : 06 .
endproc
	80de : 60 `
proc sprite.show()
R=.current.sprite
	80df : ad .
	80e0 : 01 .
	80e1 : 06 .
	80e2 : ae .
	80e3 : 02 .
	80e4 : 06 .
.poke.address=R
	80e5 : 85 .
	80e6 : 20 .
	80e7 : 86 .
	80e8 : 21 !
Y=0
	80e9 : a0 .
	80ea : 00 .
A=.poke.address[Y]
	80eb : b1 .
	80ec : 20 .
A=1
	80ed : a9 .
	80ee : 01 .
.poke.address[Y]=A
	80ef : 91 .
	80f0 : 20 .
endproc
	80f1 : 60 `
proc sprite.hide()
.poke.address=R
	80f2 : 85 .
	80f3 : 20 .
	80f4 : 86 .
	80f5 : 21 !
Y=0
	80f6 : a0 .
	80f7 : 00 .
A=.poke.address[Y]
	80f8 : b1 .
	80f9 : 20 .
A&$FE
	80fa : 29 )
	80fb : fe .
.poke.address[Y]=A
	80fc : 91 .
	80fd : 20 .
endproc
	80fe : 60 `
proc sprite.move()
Y->S
	80ff : 5a Z
R->S
	8100 : 48 H
	8101 : da .
R=.current.sprite
	8102 : ad .
	8103 : 01 .
	8104 : 06 .
	8105 : ae .
	8106 : 02 .
	8107 : 06 .
R+4
	8108 : 18 .
	8109 : 69 i
	810a : 04 .
	810b : 90 .
	810c : 01 .
	810d : e8 .
.poke.address=R
	810e : 85 .
	810f : 20 .
	8110 : 86 .
	8111 : 21 !
S->R
	8112 : fa .
	8113 : 68 h
Y=0
	8114 : a0 .
	8115 : 00 .
.poke.address[Y]=R
	8116 : 91 .
	8117 : 20 .
	8118 : c8 .
	8119 : 8a .
	811a : 91 .
	811b : 20 .
	811c : 88 .
	811d : b1 .
	811e : 20 .
++Y
	811f : c8 .
++Y
	8120 : c8 .
S->A
	8121 : 68 h
R=A
	8122 : a2 .
	8123 : 00 .
.poke.address[Y]=R
	8124 : 91 .
	8125 : 20 .
	8126 : c8 .
	8127 : 8a .
	8128 : 91 .
	8129 : 20 .
	812a : 88 .
	812b : b1 .
	812c : 20 .
endproc
	812d : 60 `
proc main()
io.select(0)
	812e : a9 .
	812f : 00 .
	8130 : a2 .
	8131 : 00 .
	8132 : 20 .
	8133 : 03 .
	8134 : 80 .
A=$2F
	8135 : a9 .
	8136 : 2f /
Vicky.Master.Control=A
	8137 : 8d .
	8138 : 00 .
	8139 : d0 .
A=1
	813a : a9 .
	813b : 01 .
Bitmap0Control=A
	813c : 8d .
	813d : 00 .
	813e : d1 .
A=1
	813f : a9 .
	8140 : 01 .
Bitmap0High=A
	8141 : 8d .
	8142 : 03 .
	8143 : d1 .
clear.bitmap($01)
	8144 : a9 .
	8145 : 01 .
	8146 : a2 .
	8147 : 00 .
	8148 : 20 .
	8149 : 6a j
	814a : 80 .
clear.sprites()
	814b : 20 .
	814c : a5 .
	814d : 80 .
map.into(16)
	814e : a9 .
	814f : 10 .
	8150 : a2 .
	8151 : 00 .
	8152 : 20 .
	8153 : 50 P
	8154 : 80 .
set.fill($2000,$E0)
	8155 : a9 .
	8156 : 00 .
	8157 : a2 .
	8158 : 20 .
	8159 : a0 .
	815a : e0 .
	815b : 20 .
	815c : 10 .
	815d : 80 .
do.fill(1024)
	815e : a9 .
	815f : 00 .
	8160 : a2 .
	8161 : 04 .
	8162 : 20 .
	8163 : 18 .
	8164 : 80 .
map.default()
	8165 : 20 .
	8166 : 60 `
	8167 : 80 .
io.select(0)
	8168 : a9 .
	8169 : 00 .
	816a : a2 .
	816b : 00 .
	816c : 20 .
	816d : 03 .
	816e : 80 .
sprite.use(1)
	816f : a9 .
	8170 : 01 .
	8171 : a2 .
	8172 : 00 .
	8173 : 20 .
	8174 : bd .
	8175 : 80 .
sprite.show()
	8176 : 20 .
	8177 : df .
	8178 : 80 .
poke($D909,0)
	8179 : a9 .
	817a : 09 .
	817b : a2 .
	817c : d9 .
	817d : a0 .
	817e : 00 .
	817f : 20 .
	8180 : 06 .
	8181 : 80 .
poke($D90A,0)
	8182 : a9 .
	8183 : 0a .
	8184 : a2 .
	8185 : d9 .
	8186 : a0 .
	8187 : 00 .
	8188 : 20 .
	8189 : 06 .
	818a : 80 .
poke($D90B,3)
	818b : a9 .
	818c : 0b .
	818d : a2 .
	818e : d9 .
	818f : a0 .
	8190 : 03 .
	8191 : 20 .
	8192 : 06 .
	8193 : 80 .
sprite.move(64,64)
	8194 : a9 .
	8195 : 40 @
	8196 : a2 .
	8197 : 00 .
	8198 : a0 .
	8199 : 40 @
	819a : 20 .
	819b : ff .
	819c : 80 .
halt
	819d : 80 .
	819e : fe .
endproc
	819f : 60 `
