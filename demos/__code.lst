byte MMUControl@0
byte IOControl@1
byte Vicky.Master.Control@$D000
byte Bitmap0Control@$D100,Bitmap0High@$D103
proc io.select()
IOControl=A
	8003 : 85 .
	8004 : 01 .
endproc
	8005 : 60 `
zword .poke.address
byte .fill.data
proc poke()
inline $86,$C1,$85,$C0,$98,$92,$C0,$60
	8006 : 86 .
	8007 : c1 .
	8008 : 85 .
	8009 : c0 .
	800a : 98 .
	800b : 92 .
	800c : c0 .
	800d : 60 `
endproc
	800e : 60 `
proc set.fill()
.poke.address=R
	800f : 85 .
	8010 : 20 .
	8011 : 86 .
	8012 : 21 !
.fill.data=Y
	8013 : 8c .
	8014 : 00 .
	8015 : 06 .
endproc
	8016 : 60 `
proc do.fill()
Y=0
	8017 : a0 .
	8018 : 00 .
r.for
	8019 : c9 .
	801a : 00 .
	801b : d0 .
	801c : 01 .
	801d : ca .
	801e : 3a :
	801f : da .
	8020 : 48 H
A=.fill.data
	8021 : ad .
	8022 : 00 .
	8023 : 06 .
.poke.address[Y]=A
	8024 : 91 .
	8025 : 20 .
++.poke.address
	8026 : e6 .
	8027 : 20 .
	8028 : d0 .
	8029 : 02 .
	802a : e6 .
	802b : 21 !
next
	802c : 68 h
	802d : fa .
	802e : d0 .
	802f : 00 .
	802f : e9 [PATCH]
	8030 : c9 .
	8031 : 00 .
	8032 : d0 .
	8033 : 00 .
	8033 : e5 [PATCH]
endproc
	8034 : 60 `
proc map()
interrupt.off
	8035 : 78 x
CPU->S
	8036 : 48 H
	8037 : da .
	8038 : 5a Z
A=$80
	8039 : a9 .
	803a : 80 .
MMUControl=A
	803b : 85 .
	803c : 00 .
S->CPU
	803d : 7a z
	803e : fa .
	803f : 68 h
R+8
	8040 : 18 .
	8041 : 69 i
	8042 : 08 .
	8043 : 90 .
	8044 : 01 .
	8045 : e8 .
poke()
	8046 : 20 .
	8047 : 06 .
	8048 : 80 .
A=$00
	8049 : a9 .
	804a : 00 .
MMUControl=A
	804b : 85 .
	804c : 00 .
interrupt.on
	804d : 58 X
endproc
	804e : 60 `
proc map.into()
a+8
	804f : 18 .
	8050 : 69 i
	8051 : 08 .
y=a
	8052 : a8 .
map(1)
	8053 : a9 .
	8054 : 01 .
	8055 : a2 .
	8056 : 00 .
	8057 : 20 .
	8058 : 35 5
	8059 : 80 .
R=$2000
	805a : a9 .
	805b : 00 .
	805c : a2 .
	805d : 20 .
endproc
	805e : 60 `
proc map.default()
map(1,9)
	805f : a9 .
	8060 : 01 .
	8061 : a2 .
	8062 : 00 .
	8063 : a0 .
	8064 : 09 .
	8065 : 20 .
	8066 : 35 5
	8067 : 80 .
endproc
	8068 : 60 `
proc clear.bitmap()
.fill.data=A
	8069 : 8d .
	806a : 00 .
	806b : 06 .
A=9
	806c : a9 .
	806d : 09 .
a.for
	806e : 3a :
	806f : 48 H
map.into()
	8070 : 20 .
	8071 : 4f O
	8072 : 80 .
.poke.address=R
	8073 : 85 .
	8074 : 20 .
	8075 : 86 .
	8076 : 21 !
32
	8077 : a9 .
	8078 : 20 .
	8079 : a2 .
	807a : 00 .
a.for
	807b : 3a :
	807c : 48 H
A=.fill.data
	807d : ad .
	807e : 00 .
	807f : 06 .
Y=0
	8080 : a0 .
	8081 : 00 .
repeat
.poke.address[Y]=A
	8082 : 91 .
	8083 : 20 .
++Y
	8084 : c8 .
Y=?
	8085 : c0 .
	8086 : 00 .
until
	8087 : d0 .
	8088 : 00 .
	8088 : f9 [PATCH]
R=.poke.address
	8089 : a5 .
	808a : 20 .
	808b : a6 .
	808c : 21 !
R+256
	808d : 18 .
	808e : 69 i
	808f : 00 .
	8090 : 48 H
	8091 : 8a .
	8092 : 69 i
	8093 : 01 .
	8094 : aa .
	8095 : 68 h
.poke.address=R
	8096 : 85 .
	8097 : 20 .
	8098 : 86 .
	8099 : 21 !
next
	809a : 68 h
	809b : d0 .
	809c : 00 .
	809c : de [PATCH]
next
	809d : 68 h
	809e : d0 .
	809f : 00 .
	809f : ce [PATCH]
map.default()
	80a0 : 20 .
	80a1 : 5f _
	80a2 : 80 .
endproc
	80a3 : 60 `
proc clear.sprites()
io.select(0)
	80a4 : a9 .
	80a5 : 00 .
	80a6 : a2 .
	80a7 : 00 .
	80a8 : 20 .
	80a9 : 03 .
	80aa : 80 .
set.fill($D900,$00)
	80ab : a9 .
	80ac : 00 .
	80ad : a2 .
	80ae : d9 .
	80af : a0 .
	80b0 : 00 .
	80b1 : 20 .
	80b2 : 0f .
	80b3 : 80 .
do.fill($200)
	80b4 : a9 .
	80b5 : 00 .
	80b6 : a2 .
	80b7 : 02 .
	80b8 : 20 .
	80b9 : 17 .
	80ba : 80 .
endproc
	80bb : 60 `
word .current.sprite
proc sprite.use()
<<R
	80bc : 0a .
	80bd : 48 H
	80be : 8a .
	80bf : 2a *
	80c0 : aa .
	80c1 : 68 h
<<R
	80c2 : 0a .
	80c3 : 48 H
	80c4 : 8a .
	80c5 : 2a *
	80c6 : aa .
	80c7 : 68 h
<<R
	80c8 : 0a .
	80c9 : 48 H
	80ca : 8a .
	80cb : 2a *
	80cc : aa .
	80cd : 68 h
R+$D900
	80ce : 18 .
	80cf : 69 i
	80d0 : 00 .
	80d1 : 48 H
	80d2 : 8a .
	80d3 : 69 i
	80d4 : d9 .
	80d5 : aa .
	80d6 : 68 h
.current.sprite=R
	80d7 : 8d .
	80d8 : 01 .
	80d9 : 06 .
	80da : 8e .
	80db : 02 .
	80dc : 06 .
endproc
	80dd : 60 `
proc sprite.show()
R=.current.sprite
	80de : ad .
	80df : 01 .
	80e0 : 06 .
	80e1 : ae .
	80e2 : 02 .
	80e3 : 06 .
.poke.address=R
	80e4 : 85 .
	80e5 : 20 .
	80e6 : 86 .
	80e7 : 21 !
Y=0
	80e8 : a0 .
	80e9 : 00 .
A=.poke.address[Y]
	80ea : b1 .
	80eb : 20 .
A=1
	80ec : a9 .
	80ed : 01 .
.poke.address[Y]=A
	80ee : 91 .
	80ef : 20 .
endproc
	80f0 : 60 `
proc sprite.hide()
.poke.address=R
	80f1 : 85 .
	80f2 : 20 .
	80f3 : 86 .
	80f4 : 21 !
Y=0
	80f5 : a0 .
	80f6 : 00 .
A=.poke.address[Y]
	80f7 : b1 .
	80f8 : 20 .
A=0
	80f9 : a9 .
	80fa : 00 .
.poke.address[Y]=A
	80fb : 91 .
	80fc : 20 .
endproc
	80fd : 60 `
proc sprite.move()
Y->S
	80fe : 5a Z
R->S
	80ff : 48 H
	8100 : da .
R=.current.sprite
	8101 : ad .
	8102 : 01 .
	8103 : 06 .
	8104 : ae .
	8105 : 02 .
	8106 : 06 .
R+4
	8107 : 18 .
	8108 : 69 i
	8109 : 04 .
	810a : 90 .
	810b : 01 .
	810c : e8 .
.poke.address=R
	810d : 85 .
	810e : 20 .
	810f : 86 .
	8110 : 21 !
S->R
	8111 : fa .
	8112 : 68 h
Y=0
	8113 : a0 .
	8114 : 00 .
.poke.address[Y]=R
	8115 : 91 .
	8116 : 20 .
	8117 : c8 .
	8118 : 8a .
	8119 : 91 .
	811a : 20 .
	811b : 88 .
	811c : b1 .
	811d : 20 .
++Y
	811e : c8 .
++Y
	811f : c8 .
S->A
	8120 : 68 h
R=A
	8121 : a2 .
	8122 : 00 .
.poke.address[Y]=R
	8123 : 91 .
	8124 : 20 .
	8125 : c8 .
	8126 : 8a .
	8127 : 91 .
	8128 : 20 .
	8129 : 88 .
	812a : b1 .
	812b : 20 .
endproc
	812c : 60 `
proc sprite.image()
R->S
	812d : 48 H
	812e : da .
R=.current.sprite
	812f : ad .
	8130 : 01 .
	8131 : 06 .
	8132 : ae .
	8133 : 02 .
	8134 : 06 .
++R
	8135 : 1a .
	8136 : d0 .
	8137 : 01 .
	8138 : e8 .
.poke.address=R
	8139 : 85 .
	813a : 20 .
	813b : 86 .
	813c : 21 !
S->R
	813d : fa .
	813e : 68 h
Y=0
	813f : a0 .
	8140 : 00 .
<<R
	8141 : 0a .
	8142 : 48 H
	8143 : 8a .
	8144 : 2a *
	8145 : aa .
	8146 : 68 h
<<R
	8147 : 0a .
	8148 : 48 H
	8149 : 8a .
	814a : 2a *
	814b : aa .
	814c : 68 h
<<R
	814d : 0a .
	814e : 48 H
	814f : 8a .
	8150 : 2a *
	8151 : aa .
	8152 : 68 h
<<R
	8153 : 0a .
	8154 : 48 H
	8155 : 8a .
	8156 : 2a *
	8157 : aa .
	8158 : 68 h
<<R
	8159 : 0a .
	815a : 48 H
	815b : 8a .
	815c : 2a *
	815d : aa .
	815e : 68 h
<<R
	815f : 0a .
	8160 : 48 H
	8161 : 8a .
	8162 : 2a *
	8163 : aa .
	8164 : 68 h
.poke.address[Y]=R
	8165 : 91 .
	8166 : 20 .
	8167 : c8 .
	8168 : 8a .
	8169 : 91 .
	816a : 20 .
	816b : 88 .
	816c : b1 .
	816d : 20 .
Y=2
	816e : a0 .
	816f : 02 .
A=3
	8170 : a9 .
	8171 : 03 .
.poke.address[Y]=A
	8172 : 91 .
	8173 : 20 .
endproc
	8174 : 60 `
proc main()
byte xp
io.select(0)
	8175 : a9 .
	8176 : 00 .
	8177 : a2 .
	8178 : 00 .
	8179 : 20 .
	817a : 03 .
	817b : 80 .
A=$3F
	817c : a9 .
	817d : 3f ?
Vicky.Master.Control=A
	817e : 8d .
	817f : 00 .
	8180 : d0 .
A=1
	8181 : a9 .
	8182 : 01 .
Bitmap0Control=A
	8183 : 8d .
	8184 : 00 .
	8185 : d1 .
A=1
	8186 : a9 .
	8187 : 01 .
Bitmap0High=A
	8188 : 8d .
	8189 : 03 .
	818a : d1 .
clear.bitmap($3)
	818b : a9 .
	818c : 03 .
	818d : a2 .
	818e : 00 .
	818f : 20 .
	8190 : 69 i
	8191 : 80 .
clear.sprites()
	8192 : 20 .
	8193 : a4 .
	8194 : 80 .
map.into(16)
	8195 : a9 .
	8196 : 10 .
	8197 : a2 .
	8198 : 00 .
	8199 : 20 .
	819a : 4f O
	819b : 80 .
set.fill(R,$E8)
	819c : a0 .
	819d : e8 .
	819e : 20 .
	819f : 0f .
	81a0 : 80 .
do.fill(1024)
	81a1 : a9 .
	81a2 : 00 .
	81a3 : a2 .
	81a4 : 04 .
	81a5 : 20 .
	81a6 : 17 .
	81a7 : 80 .
map.default()
	81a8 : 20 .
	81a9 : 5f _
	81aa : 80 .
A=8
	81ab : a9 .
	81ac : 08 .
a.for
	81ad : 3a :
	81ae : 48 H
a->s
	81af : 48 H
<<a
	81b0 : 0a .
<<a
	81b1 : 0a .
<<a
	81b2 : 0a .
<<a
	81b3 : 0a .
a+64
	81b4 : 18 .
	81b5 : 69 i
	81b6 : 40 @
xp=a
	81b7 : 8d .
	81b8 : 03 .
	81b9 : 06 .
s->a
	81ba : 68 h
sprite.use(a)
	81bb : a2 .
	81bc : 00 .
	81bd : 20 .
	81be : bc .
	81bf : 80 .
sprite.show()
	81c0 : 20 .
	81c1 : de .
	81c2 : 80 .
sprite.image(8)
	81c3 : a9 .
	81c4 : 08 .
	81c5 : a2 .
	81c6 : 00 .
	81c7 : 20 .
	81c8 : 2d -
	81c9 : 81 .
sprite.move(xp,xp)
	81ca : ad .
	81cb : 03 .
	81cc : 06 .
	81cd : a2 .
	81ce : 00 .
	81cf : ac .
	81d0 : 03 .
	81d1 : 06 .
	81d2 : 20 .
	81d3 : fe .
	81d4 : 80 .
next
	81d5 : 68 h
	81d6 : d0 .
	81d7 : 00 .
	81d7 : d5 [PATCH]
io.select(0)
	81d8 : a9 .
	81d9 : 00 .
	81da : a2 .
	81db : 00 .
	81dc : 20 .
	81dd : 03 .
	81de : 80 .
poke($D903,3)
	81df : a9 .
	81e0 : 03 .
	81e1 : a2 .
	81e2 : d9 .
	81e3 : a0 .
	81e4 : 03 .
	81e5 : 20 .
	81e6 : 06 .
	81e7 : 80 .
sprite.use(4)
	81e8 : a9 .
	81e9 : 04 .
	81ea : a2 .
	81eb : 00 .
	81ec : 20 .
	81ed : bc .
	81ee : 80 .
repeat
R=320
	81ef : a9 .
	81f0 : 40 @
	81f1 : a2 .
	81f2 : 01 .
r.for
	81f3 : c9 .
	81f4 : 00 .
	81f5 : d0 .
	81f6 : 01 .
	81f7 : ca .
	81f8 : 3a :
	81f9 : da .
	81fa : 48 H
sprite.move(R,64)
	81fb : a0 .
	81fc : 40 @
	81fd : 20 .
	81fe : fe .
	81ff : 80 .
R=2000
	8200 : a9 .
	8201 : d0 .
	8202 : a2 .
	8203 : 07 .
R.FOR
	8204 : c9 .
	8205 : 00 .
	8206 : d0 .
	8207 : 01 .
	8208 : ca .
	8209 : 3a :
	820a : da .
	820b : 48 H
NEXT
	820c : 68 h
	820d : fa .
	820e : d0 .
	820f : 00 .
	820f : f4 [PATCH]
	8210 : c9 .
	8211 : 00 .
	8212 : d0 .
	8213 : 00 .
	8213 : f0 [PATCH]
next
	8214 : 68 h
	8215 : fa .
	8216 : d0 .
	8217 : 00 .
	8217 : db [PATCH]
	8218 : c9 .
	8219 : 00 .
	821a : d0 .
	821b : 00 .
	821b : d7 [PATCH]
A=0
	821c : a9 .
	821d : 00 .
A<>?
	821e : c9 .
	821f : 00 .
until
	8220 : f0 .
	8221 : 00 .
	8221 : cd [PATCH]
halt
	8222 : 80 .
	8223 : fe .
endproc
	8224 : 60 `
