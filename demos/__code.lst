byte MMUControl@0
byte IOControl@1
byte Vicky.Master.Control@$D000
byte Bitmap0Control@$D100
byte Bitmap0High@$D103
proc io.select()
IOControl=A
	8003 : 85 .
	8004 : 01 .
endproc
	8005 : 60 `
zword poke.address
byte fill.data
proc poke()
poke.address=R
	8006 : 85 .
	8007 : 20 .
	8008 : 86 .
	8009 : 21 !
A=Y
	800a : 98 .
Y=0
	800b : a0 .
	800c : 00 .
poke.address[Y]=A
	800d : 91 .
	800e : 20 .
endproc
	800f : 60 `
proc set.fill()
poke.address=R
	8010 : 85 .
	8011 : 20 .
	8012 : 86 .
	8013 : 21 !
fill.data=Y
	8014 : 8c .
	8015 : 00 .
	8016 : 06 .
endproc
	8017 : 60 `
proc map()
interrupt.off
	8018 : 78 x
CPU->S
	8019 : 48 H
	801a : da .
	801b : 5a Z
A=$80
	801c : a9 .
	801d : 80 .
MMUControl=A
	801e : 85 .
	801f : 00 .
S->CPU
	8020 : 7a z
	8021 : fa .
	8022 : 68 h
R+8
	8023 : 18 .
	8024 : 69 i
	8025 : 08 .
	8026 : 90 .
	8027 : 01 .
	8028 : e8 .
poke()
	8029 : 20 .
	802a : 06 .
	802b : 80 .
A=$00
	802c : a9 .
	802d : 00 .
MMUControl=A
	802e : 85 .
	802f : 00 .
interrupt.on
	8030 : 58 X
endproc
	8031 : 60 `
proc do.fill()
Y=0
	8032 : a0 .
	8033 : 00 .
r.for
	8034 : c9 .
	8035 : 00 .
	8036 : d0 .
	8037 : 01 .
	8038 : ca .
	8039 : 3a :
	803a : da .
	803b : 48 H
A=fill.data
	803c : ad .
	803d : 00 .
	803e : 06 .
poke.address[Y]=A
	803f : 91 .
	8040 : 20 .
++poke.address
	8041 : e6 .
	8042 : 20 .
	8043 : d0 .
	8044 : 02 .
	8045 : e6 .
	8046 : 21 !
next
	8047 : 68 h
	8048 : fa .
	8049 : d0 .
	804a : 00 .
	804a : e9 [PATCH]
	804b : c9 .
	804c : 00 .
	804d : d0 .
	804e : 00 .
	804e : e5 [PATCH]
endproc
	804f : 60 `
proc main()
io.select(0)
	8050 : a9 .
	8051 : 00 .
	8052 : a2 .
	8053 : 00 .
	8054 : 20 .
	8055 : 03 .
	8056 : 80 .
A=15
	8057 : a9 .
	8058 : 0f .
Vicky.Master.Control=A
	8059 : 8d .
	805a : 00 .
	805b : d0 .
A=1
	805c : a9 .
	805d : 01 .
Bitmap0Control=A
	805e : 8d .
	805f : 00 .
	8060 : d1 .
A=1
	8061 : a9 .
	8062 : 01 .
Bitmap0High=A
	8063 : 8d .
	8064 : 03 .
	8065 : d1 .
A=9
	8066 : a9 .
	8067 : 09 .
a.for
	8068 : 3a :
	8069 : 48 H
A+8
	806a : 18 .
	806b : 69 i
	806c : 08 .
y=a
	806d : a8 .
map(1)
	806e : a9 .
	806f : 01 .
	8070 : a2 .
	8071 : 00 .
	8072 : 20 .
	8073 : 18 .
	8074 : 80 .
set.fill($2000,$F0)
	8075 : a9 .
	8076 : 00 .
	8077 : a2 .
	8078 : 20 .
	8079 : a0 .
	807a : f0 .
	807b : 20 .
	807c : 10 .
	807d : 80 .
do.fill(8192)
	807e : a9 .
	807f : 00 .
	8080 : a2 .
	8081 : 20 .
	8082 : 20 .
	8083 : 32 2
	8084 : 80 .
next
	8085 : 68 h
	8086 : d0 .
	8087 : 00 .
	8087 : e0 [PATCH]
map(1,9)
	8088 : a9 .
	8089 : 01 .
	808a : a2 .
	808b : 00 .
	808c : a0 .
	808d : 09 .
	808e : 20 .
	808f : 18 .
	8090 : 80 .
halt
	8091 : 80 .
	8092 : fe .
endproc
	8093 : 60 `
